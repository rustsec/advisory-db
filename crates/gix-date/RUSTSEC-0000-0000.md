```toml
[advisory]
id = "RUSTSEC-0000-0000"
package = "gix-date"
date = "2025-12-29"
url = "https://github.com/GitoxideLabs/gitoxide/issues/2305"
categories = ["memory-corruption"]
keywords = ["utf8", "undefined-behavior"]

[affected.functions]
"gix_date::parse::TimeBuf::as_str" = ["<= 0.11.1"]

[versions]
patched = [">= 0.12.0"]
```

# Non-utf8 String can be created with `TimeBuf::as_str`

The function `gix_date::parse::TimeBuf::as_str` can create an illegal string containing non-utf8 characters. This violates the safety invariant of `TimeBuf` and can lead to undefined behavior when consuming the string.

The bug can be prevented by adding `str::from_utf8` to the function `TimeBuf::write`.